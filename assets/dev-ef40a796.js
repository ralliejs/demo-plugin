import{d as q}from"./demo-dcfa8c00.js";function E(e,o,i,l){return new(i||(i=Promise))(function(b,h){function v(a){try{s(l.next(a))}catch(c){h(c)}}function m(a){try{s(l.throw(a))}catch(c){h(c)}}function s(a){var c;a.done?b(a.value):(c=a.value,c instanceof i?c:new i(function(H){H(c)})).then(v,m)}s((l=l.apply(e,o||[])).next())})}const k=e=>`[@rallie/load-html] ${e}`,T=/^(http:\/\/|https:\/\/|\/\/)([^?#]*)(\?[^?#]+)?(#.+)?/,C=e=>k(`Invalid html path: ${e}`),P=(e,o)=>k(`Can not construct a url by the base '${e}' and the path '${o}'`),w=e=>{const o=Array.from(e.attributes),i=document.createElement(e.tagName);return o.forEach(l=>{i.setAttribute(l.name,l.value)}),i.innerHTML=e.innerHTML,i},R=(e={})=>(o,i)=>E(void 0,void 0,void 0,function*(){var l;const b=(l=e.fetch)!==null&&l!==void 0?l:window.fetch;o.loadHtml=v=>E(void 0,void 0,void 0,function*(){var m,s;const a=(s=(m=o.regardHtmlPathAsRoot)!==null&&m!==void 0?m:e.regardHtmlPathAsRoot)!==null&&s!==void 0&&s,c=yield b(v),H=yield c.text(),[$,L]=(n=>{const r=T.exec(n);if(r)return[r[0],r[4]||null];throw new Error(C(n))})(v),{root:A,scripts:x,links:M,styles:S}=((n,r,u)=>{const d=document.createElement("html");d.innerHTML=n;const f=Array.from(d.querySelectorAll("script")).map(t=>w(t)).map(t=>{const y=t.getAttribute("src");return u&&y&&t.setAttribute("src",u(y)),t}),p=Array.from(d.querySelectorAll("link")).map(t=>w(t)).map(t=>{const y=t.getAttribute("href");return u&&y&&t.setAttribute("href",u(y)),t}),g=Array.from(d.querySelectorAll("style")).map(t=>w(t));return{root:r?d.querySelector(r):null,scripts:f,links:p,styles:g}})(H,L,n=>((r,u,d=!1)=>{if(/^(http:\/\/|https:\/\/|\/\/).+/.test(r))return r;const f=T.exec(u);if(f){const p=f[1],g=f[2];d&&r.startsWith("/")&&(r=r.slice(1));let t="";return t=new URL(r,(p==="//"?"http://":p)+g).href,p==="//"&&(t=t.slice(5)),t}return console.error(P(u,r)),""})(n,$,a));for(const n of S)document.head.appendChild(n);for(const n of M)o.loadLink(n);if(A){const n=document.querySelector(L);n?n.innerHTML=A.innerHTML:document.body.appendChild(A)}for(const n of x)yield o.loadScript(n);return!!(x.length+M.length+S.length)||!!A});const h=(e.entries||{})[o.name];h?yield o.loadHtml(h):yield i()}),N=e=>{e.use(R({entries:{core:"http://localhost:8080/"}})),q.activate(q.name)};export{N as runInNonEntryMode};
